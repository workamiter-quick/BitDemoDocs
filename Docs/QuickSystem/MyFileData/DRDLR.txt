select top 5 * from Settlement

select top 5 * from SettlementData

select top 5 * from SettlemetFinalData

select top 5 * from QASettlemetData

select top 5 * from Location


http://41.189.71.139/RDLRQALive/Login.aspx


http://41.189.71.139/RMWeb/home.aspx

http://41.189.71.139/RMWebQA/Login.aspx



GetUserStat




select ST_SettlementID, ST_POI .value('(/ArrayOfPOIColl/POIColl/@Name)[1]', 'nvarchar(max)') as Name,
 ST_POI .value('(/ArrayOfPOIColl/POIColl/@D)[1]', 'nvarchar(max)') as Device_ID, 
 ST_POI .value('(/ArrayOfPOIColl/POIColl/@C)[1]', 'nvarchar(max)') as Category 
 into FlatTable_ST_POI
 from SettlemetFinalData

 select * from SettlemetFinalData
  select * from Settlement

 select * from FlatTable_ST_POI a inner join POI2 b on a.Device_ID = b.POI_DeviceID order by Device_ID desc

  select * from FlatTable_ST_POI where Device_ID = '101776' order by ST_SettlementID

  select * from (select * from (select Device_ID, count(Device_ID) as c from FlatTable_ST_POI  group by Device_ID) as f where c> 1) as xx order by c desc


 select top 5 * from POI2


select (geometry::STGeomFromText(BoundaryWKT, 4326)).STUnion((geometry::STGeomFromText('POINT('+GoogleY+'  '+GoogleX+')', 4326)).STBuffer(0.001)) as geom, * into FlatTable_ST_POI_7  from FlatTable_ST_POI_2 where POI_DeviceID = '122337' and ST_SettlementID = '969080001'



DECLARE @sP INT;
DECLARE @tP INT;
DECLARE @SettlementID varchar(50);
Declare @RecivedOn datetime;
DECLARE @DmCode nvarchar(10);
DECLARE @LmCode nvarchar(10);
DECLARE @ProvinceId INT;
DECLARE @POI_DeviceID1 nvarchar(max)
SET @sP = 1;
select @tP = max(TID) from SetRegion
WHILE @sP <= @tP
BEGIN
	select @RecivedOn = RecivedOn, @SettlementID = ST_SettlementID, @DmCode = DmCode, @LmCode = LmCode, @ProvinceId = ProvinceId from SetRegion where TID = @sP
	update FlatTable_ST_POI_1 set RecivedOn = @RecivedOn, DmCode = @DmCode, LmCode = @LmCode, ProvinceId = @ProvinceId where ST_SettlementID = @SettlementID
	set @sP = @sP + 1
END


------------------------------------------------------

SELECT
    col.name, col.collation_name
FROM 
    sys.columns col
WHERE
    object_id = OBJECT_ID('FlatTable_ST_POI_2')


	ALTER TABLE FlatTable_ST_POI_2
  ALTER COLUMN POI_DeviceID
    VARCHAR(100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL
    
    
    Cannot resolve the collation conflict between "Latin1_General_CI_AS" and "SQL_Latin1_General_CP1_CI_AS" in the equal to operation.
 ------------------------------------------------------
 
 
 Update POI
 set IsDuplciate = 1
 where UID not in (
 select max(UID)  from POI
group by GUID having count(*) > 1 )


----------------------------


111128 DistanceMeter




/****** Script for SelectTopNRows command from SSMS  ******/
SELECT POIInsideSet, count(POIInsideSet)
  FROM [ORT_RURALMAPPING_3].[dbo].[FlatTable_ST_POI_2] group by POIInsideSet


  
0	20984
1	27843


select * from FlatTable_ST_POI_2 a inner join POI_Category b on a.Category = b.CategoryID where a.POIInsideSet = 0






UPDATE [dbo].[POIUpdate]
   SET 
      [New_CategoryID] = 0
      ,[New_Name] = ''
      ,[New_GoogleX] = ''
      ,[New_GoogleY] = ''
      ,[New_ActionItem] = 0
      ,[New_IsCompleted] = 0
 where new_name != ''


select * from POIUpdate where new_name != ''


http://41.189.71.139/DRDLRRM/RM/MapViewer.html



KZN-DC22-KZN227-40184

